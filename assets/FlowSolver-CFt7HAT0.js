import{r as l,j as e}from"./index-DU5SwdNk.js";const _=()=>{const F=[5,6,7,8,9,10,11,12,13,14,15],b={1:"#FF0000",2:"#0000FF",3:"#FFFF00",4:"#008000",5:"#FFA500",6:"#00FFFF",7:"#FF00FF",8:"#800000",9:"#800080",10:"#808080",11:"#FFFFFF",12:"#00FF00",13:"#D2B48C",14:"#00008B",15:"#008B8B",16:"#FFC0CB"},j=t=>Array(t).fill(null).map(()=>Array(t).fill(0)),[d,z]=l.useState(5),[c,w]=l.useState(()=>j(5)),[u,k]=l.useState(null),[m,h]=l.useState(1),[B,x]=l.useState(!1),[y,n]=l.useState(null),[f,v]=l.useState(!1),[g,N]=l.useState(null),S=l.useCallback((t=d)=>{w(j(t)),k(null),h(1),x(!1),n(null),N(null)},[d]),T=t=>{const o=parseInt(t.target.value);z(o),S(o)},p=(t,o)=>t.flat().filter(i=>i===o).length,A=l.useCallback((t,o)=>{if(u)return;const i=c[t][o],r=c.map(a=>[...a]);if(i!==0){r[t][o]=0;const a=p(r,i);if(a===1)h(i),x(!0);else if(a===0){let s=1;for(;p(r,s)===2;)s++;h(s),x(p(r,s)===1)}}else{const a=p(c,m);if(a>=2){let s=m;for(;p(c,s)>=2&&s<=16;)s++;if(s>16)return;h(s),x(p(c,s)===1);return}if(r[t][o]=m,a===1){let s=m+1;for(;p(r,s)>=2&&s<=16;)s++;h(s),x(!1)}else x(!0)}w(r)},[c,u,m]),[C,$]=l.useState("z3"),E=async()=>{n(null),v(!0);const t=new Worker(new URL("/flow-free-solver/assets/solver.worker-DssHqh3q.js",import.meta.url),{type:"module"}),o=performance.now();t.postMessage({board:c,type:C}),t.onmessage=i=>{const r=i.data;if(v(!1),t.terminate(),r.board){const a=performance.now();N(a-o),k(r.board)}else r.timedOut?(n("Timed out (15s limit)"),setTimeout(()=>n(null),4e3)):r.error?(n("Solver error: "+r.error),setTimeout(()=>n(null),3e3)):(n("No solution found"),setTimeout(()=>n(null),3e3))},t.onerror=i=>{console.error("Worker error:",i),v(!1),n("Solver error"),setTimeout(()=>n(null),3e3),t.terminate()}},I=u||c;return e.jsxs("main",{className:"flex flex-col justify-center items-center h-[100dvh] w-full bg-stoic-bg safe-area-inset touch-manipulation overflow-hidden gap-6 sm:gap-8",children:[e.jsx("header",{className:"text-center flex flex-col items-center gap-1 selectable-text shrink-0",children:e.jsx("h1",{className:"text-stoic-primary text-xl sm:text-2xl md:text-3xl uppercase tracking-[0.2em] font-bold",children:"Flow Free Solver"})}),e.jsx("article",{"aria-label":"Puzzle Grid Board",className:"grid bg-stoic-line border-2 border-stoic-line mx-auto shrink-0",style:{gap:"2px",gridTemplateColumns:`repeat(${d}, 1fr)`,gridTemplateRows:`repeat(${d}, 1fr)`,width:"min(90vw, 55vh)",height:"min(90vw, 55vh)"},children:Array.from({length:d}).map((t,o)=>Array.from({length:d}).map((i,r)=>{const a=I[r]?.[o]??0,s=a!==0;return e.jsx("button",{type:"button",className:`
                                    group
                                    w-full h-full
                                    bg-stoic-block-bg
                                    p-0 m-0 appearance-none cursor-pointer 
                                    flex items-center justify-center 
                                    transition-all duration-150
                                    touch-manipulation
                                    select-none
                                    ${u?"cursor-default":"hover:bg-stoic-block-hover active:scale-95 active:bg-stoic-block-hover"}
                                `,onClick:()=>!u&&A(r,o),"aria-label":`Cell ${r},${o} ${s?`Color ${a}`:"Empty"}`,children:s?e.jsx("span",{className:"rounded-full w-[70%] h-[70%]",style:{backgroundColor:b[a]||"#888"}}):!u&&e.jsx("span",{className:"rounded-full w-[70%] h-[70%] opacity-0 group-hover:opacity-50 transition-opacity duration-75",style:{backgroundColor:b[m]||"#888"}})},`${r}-${o}`)}))}),e.jsxs("section",{"aria-label":"Game Controls",className:"flex flex-col items-center gap-6 shrink-0 z-10",children:[e.jsx("div",{role:"status",className:"flex items-center gap-3 min-h-[28px] selectable-text",children:f?e.jsxs("span",{className:"text-stoic-accent text-sm uppercase tracking-widest font-semibold flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),e.jsx("path",{className:"opacity-100",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Solving…"]}):y?e.jsxs("span",{className:"text-sm uppercase tracking-widest font-semibold animate-pulse",style:{color:"#FF3B30"},children:["✗ ",y]}):u?e.jsxs("span",{className:"text-stoic-accent text-sm uppercase tracking-widest font-semibold flex items-center gap-2",children:["✓ Solved",g!==null&&e.jsxs("span",{className:"text-stoic-secondary text-xs opacity-75",children:["(",g<1e3?`${Math.round(g)}ms`:`${(g/1e3).toFixed(2)}s`,")"]})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-stoic-primary text-sm uppercase tracking-wider font-medium",children:"Place"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-4 h-4 rounded-full",style:{backgroundColor:b[m]||"#888"}}),e.jsx("span",{className:"text-stoic-primary text-sm uppercase tracking-wider font-medium",children:B?"End":"Start"})]})]})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("select",{className:"h-9 sm:h-10 pl-3 pr-7 text-xs border border-stoic-line bg-stoic-bg text-stoic-primary uppercase tracking-wide focus:outline-none focus:border-stoic-accent cursor-pointer appearance-none",value:d,onChange:T,"aria-label":"Grid Size",children:F.map(t=>e.jsxs("option",{value:t,children:[t,"×",t]},t))}),e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-stoic-secondary pointer-events-none text-[10px]",children:"▼"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"h-9 sm:h-10 pl-3 pr-7 text-xs border border-stoic-line bg-stoic-bg text-stoic-primary uppercase tracking-wide focus:outline-none focus:border-stoic-accent cursor-pointer appearance-none",value:C,onChange:t=>$(t.target.value),"aria-label":"Solver Algorithm",children:[e.jsx("option",{value:"astar",children:"A*"}),e.jsx("option",{value:"z3",children:"SAT (Z3)"})]}),e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-stoic-secondary pointer-events-none text-[10px]",children:"▼"})]}),e.jsxs("button",{className:"h-9 sm:h-10 px-4 text-xs border-2 border-stoic-accent bg-stoic-accent text-stoic-bg font-bold uppercase tracking-wider hover:bg-transparent hover:text-stoic-accent transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-stoic-accent disabled:hover:text-stoic-bg select-none flex items-center gap-2",onClick:E,disabled:f,children:[f&&e.jsxs("svg",{className:"animate-spin h-3 w-3",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),e.jsx("path",{className:"opacity-100",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),f?"Solving":"Solve"]}),e.jsx("button",{className:"h-9 sm:h-10 px-3 text-xs border border-stoic-line bg-transparent text-stoic-secondary uppercase tracking-wider hover:border-stoic-secondary hover:text-stoic-primary transition-colors select-none",onClick:()=>S(),children:"Reset"})]})]}),e.jsxs("footer",{className:"px-6 max-w-lg text-center text-stoic-secondary text-xs leading-relaxed selectable-text shrink-0",children:[e.jsxs("p",{children:["Interactive solver for Number Link puzzles.",e.jsx("br",{className:"hidden sm:block"}),"Supports 5×5 to 15×15 grids using SAT (Z3) & A* algorithms."]}),e.jsxs("div",{className:"mt-2 flex justify-center gap-4",children:[e.jsx("a",{href:"https://www.kongesque.com/",target:"_blank",rel:"noopener noreferrer",className:"hover:text-stoic-primary hover:underline transition-colors",children:"Author"}),e.jsx("a",{href:"https://github.com/Kongesque/flow-free-solver",target:"_blank",rel:"noopener noreferrer",className:"hover:text-stoic-primary hover:underline transition-colors",children:"GitHub"}),e.jsx("a",{href:"https://en.wikipedia.org/wiki/Numberlink",target:"_blank",rel:"noopener noreferrer nofollow",className:"hover:text-stoic-primary hover:underline transition-colors",children:"Wikipedia"})]})]})]})};export{_ as default};
